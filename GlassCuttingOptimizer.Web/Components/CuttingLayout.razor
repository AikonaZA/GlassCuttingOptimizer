@page "/layout"
@inject ApiService ApiService

<h3>Glass Cutting Optimization Layout</h3>

<button class="btn btn-primary" @onclick="OptimizeCutting">Run Optimization</button>

@if (optimizationResult != null)
{
    <svg width="1000" height="600" style="border: 1px solid black;">
        @foreach (var position in optimizationResult.CutPositions)
        {
            <!-- Drawing each panel as a rectangle on the SVG canvas -->
            <rect x="@position.X" y="@position.Y" 
                  width="@position.Width" height="@position.Height" 
                  fill="rgba(0, 123, 255, 0.5)" stroke="black" />
            <!-- Optionally add labels to identify each panel -->
            @* <text x="@(position.X + 5)" y="@(position.Y + 15)" font-size="12" fill="black">
                  W:@position.Width H:@position.Height</text> *@
        }
    </svg>

    <p>Waste Percentage: @optimizationResult.WastePercentage%</p>
}

@code {
    private OptimizationResultDTO optimizationResult;

    private async Task OptimizeCutting()
    {
        optimizationResult = await ApiService.OptimizeCuttingAsync();
    }
}
